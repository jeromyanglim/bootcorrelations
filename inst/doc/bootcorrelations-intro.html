<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>An Introduction to the <code>bootcorrelations</code> package</title>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>

<!-- MathJax scripts -->
<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}
</style>



</head>

<body>
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{An Introduction to the bootcorrelations package}
-->

<h1>An Introduction to the <code>bootcorrelations</code> package</h1>

<p>I developed the <code>bootcorrelations</code> package (a) to help me learn about writing packages, and (b) write some functions that perform a bootstrap test of whether the average correlation in one set of variables differ from the correlation in another set. It is assumed that the two sets of variables are measured on the same cases.</p>

<p>The motivation for this function comes from work on the Big 5 personality factors (Extraversion, Emotional Stability, Conscientiousness, Openness, and Agreeableness). There is discussion about whether these five factors are correlated both theoretically and in terms of measured variables. Several studies have shown modest correlations between the Big 5. There is also some research to suggest that the size of the average correlation increases due to various contextual factors. </p>

<p>Note that the analysis makes most sense where all or most correlations are positive. If necessary variables are typically reversed to ensure mostly positive correlations. For example, in the Big 5 personality test example, neuroticism is reversed to create what is labelled &ldquo;emotional stability&rdquo;. This typically leads to positive correlations whereas by default neuroticism often correlates negatively with the other Big 5 factors.</p>

<h1>A simple example</h1>

<p>Let&#39;s simulate some sample data.</p>

<p>The function <code>generate_correlated_data</code> is an internal function for creating sample datasets suited for comparison of average correlations.
Specifically, it creates a dataset with <code>n</code> observations and six variables. The six variables are made up of two sets: set 1 is labelled a1, a2, a3, and set 2 is labelled b1, b2, b3.
The data is drawn from a multivariate standard normal distribution where the correlations within and between sets are specified in the function.</p>

<pre><code class="r">library(bootcorrelations)
</code></pre>

<pre><code>## Loading required package: boot
</code></pre>

<pre><code class="r">set.seed(1234)
x &lt;- bootcorrelations:::generate_correlated_data(n = 100, r_set1 = 0.3, r_set2 = 0.5, 
    r_set1_set2 = 0.2)
x$set1
</code></pre>

<pre><code>## [1] &quot;a1&quot; &quot;a2&quot; &quot;a3&quot;
</code></pre>

<pre><code class="r">x$set2
</code></pre>

<pre><code>## [1] &quot;b1&quot; &quot;b2&quot; &quot;b3&quot;
</code></pre>

<pre><code class="r">head(x$data)
</code></pre>

<pre><code>##        a1      a2       a3      b1      b2      b3
## 1  0.2333  0.9371  0.10684  1.8795  0.8947  0.3246
## 2 -0.2548  0.8985 -0.36116 -0.9986  0.2261 -0.3549
## 3 -0.6525 -0.4334 -0.72719 -0.2916 -1.0013 -1.0114
## 4  2.3235  1.1552  0.98925  1.7352  1.8444  1.0110
## 5  0.3069  0.2906 -0.02123  0.1560 -1.6266 -0.3738
## 6 -0.4962  0.2996 -0.85630 -0.4748 -0.2313 -0.2202
</code></pre>

<p>We can examine the sample correlations.</p>

<pre><code class="r">round(cor(x$data), 2)
</code></pre>

<pre><code>##      a1   a2   a3   b1   b2   b3
## a1 1.00 0.21 0.26 0.16 0.18 0.14
## a2 0.21 1.00 0.42 0.11 0.22 0.24
## a3 0.26 0.42 1.00 0.19 0.19 0.19
## b1 0.16 0.11 0.19 1.00 0.56 0.38
## b2 0.18 0.22 0.19 0.56 1.00 0.55
## b3 0.14 0.24 0.19 0.38 0.55 1.00
</code></pre>

<p>On the face of it, the correlations between set1 look a little smaller than set 2. But is this a significant difference? How can we quantify our uncertainty regarding the population difference?</p>

<p>We can use the <code>boot_mean_cor_diff</code> function.
It uses the <code>boot</code> package to perform a bootstrapping on the mean difference between average correlations across the two sets of variables. To run the function, the names of the variables in set1 and set2 are specified as well as the data frame containing those variables.  To control the bootstrapping <code>iterations</code> is specified. 1,000 iterations should give reasonable estimates, but more is better in order to remove imprecision associated with the boostrapping process. So 10,000, 100,000, or more would be suitable for published results.</p>

<pre><code class="r">fit &lt;- boot_mean_cor_diff(x$set1, x$set2, x$data, iterations = 1000, ci = 0.95)
str(fit)
</code></pre>

<pre><code>## List of 10
##  $ boot_results:List of 11
##   ..$ t0       : num -0.203
##   ..$ t        : num [1:1000, 1] -0.2647 -0.0872 -0.1494 -0.2268 -0.2193 ...
##   ..$ R        : num 1000
##   ..$ data     :&#39;data.frame&#39;:    100 obs. of  6 variables:
##   .. ..$ a1: num [1:100] 0.233 -0.255 -0.652 2.323 0.307 ...
##   .. ..$ a2: num [1:100] 0.937 0.898 -0.433 1.155 0.291 ...
##   .. ..$ a3: num [1:100] 0.1068 -0.3612 -0.7272 0.9892 -0.0212 ...
##   .. ..$ b1: num [1:100] 1.879 -0.999 -0.292 1.735 0.156 ...
##   .. ..$ b2: num [1:100] 0.895 0.226 -1.001 1.844 -1.627 ...
##   .. ..$ b3: num [1:100] 0.325 -0.355 -1.011 1.011 -0.374 ...
##   ..$ seed     : int [1:626] 403 576 -470778465 -22815416 -940255196 -534373217 -1216847708 674386435 -1112005887 -2036281558 ...
##   ..$ statistic:function (d, ind, set1, set2)  
##   ..$ sim      : chr &quot;ordinary&quot;
##   ..$ call     : language boot(data = data[, c(set1, set2)], statistic = mean_diff_correlation,      R = iterations, set1 = set1, set2 = set2)
##   ..$ stype    : chr &quot;i&quot;
##   ..$ strata   : num [1:100] 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ weights  : num [1:100] 0.01 0.01 0.01 0.01 0.01 0.01 0.01 0.01 0.01 0.01 ...
##   ..- attr(*, &quot;class&quot;)= chr &quot;boot&quot;
##  $ cor_matrix1 : num [1:3, 1:3] 1 0.207 0.257 0.207 1 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:3] &quot;a1&quot; &quot;a2&quot; &quot;a3&quot;
##   .. ..$ : chr [1:3] &quot;a1&quot; &quot;a2&quot; &quot;a3&quot;
##  $ cor_matrix2 : num [1:3, 1:3] 1 0.562 0.376 0.562 1 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##   .. ..$ : chr [1:3] &quot;b1&quot; &quot;b2&quot; &quot;b3&quot;
##   .. ..$ : chr [1:3] &quot;b1&quot; &quot;b2&quot; &quot;b3&quot;
##  $ mean_cor1   : num 0.295
##  $ mean_cor2   : num 0.497
##  $ set1        : chr [1:3] &quot;a1&quot; &quot;a2&quot; &quot;a3&quot;
##  $ set2        : chr [1:3] &quot;b1&quot; &quot;b2&quot; &quot;b3&quot;
##  $ data        :&#39;data.frame&#39;:    100 obs. of  6 variables:
##   ..$ a1: num [1:100] 0.233 -0.255 -0.652 2.323 0.307 ...
##   ..$ a2: num [1:100] 0.937 0.898 -0.433 1.155 0.291 ...
##   ..$ a3: num [1:100] 0.1068 -0.3612 -0.7272 0.9892 -0.0212 ...
##   ..$ b1: num [1:100] 1.879 -0.999 -0.292 1.735 0.156 ...
##   ..$ b2: num [1:100] 0.895 0.226 -1.001 1.844 -1.627 ...
##   ..$ b3: num [1:100] 0.325 -0.355 -1.011 1.011 -0.374 ...
##  $ iterations  : num 1000
##  $ ci          : num 0.95
##  - attr(*, &quot;class&quot;)= chr &quot;boot_mean_cor_diff&quot;
</code></pre>

<p>The following analysis shows the structure of the returned object.</p>

<ul>
<li><code>t0</code> is the mean of the bootstrapped estimates </li>
<li><code>t</code> is the vector bootstrapped estimates</li>
</ul>

<p>There is an associated print method <code>print.boot_mean_cor_diff</code> for the returned object which is called by default when displaying the returned object that displays the results in a more readable format. To make the results slightly clearer, I might flips the sets around (i.e.., do set2 - set1 because set 2 has the larger average correlation):</p>

<pre><code class="r"># or use print(fit)
fit &lt;- boot_mean_cor_diff(x$set2, x$set1, x$data, iterations = 1000, ci = 0.95)
fit
</code></pre>

<pre><code>## 
## BOOTSTRAPPED TEST OF DIFFERENCE IN MEAN CORRELATIONS
## 
## DESCRIPTION
## n = 100
## Set 1: b1 b2 b3
## Set 2: a1 a2 a3
## CORRELATION MATRICES
## SET 1:
##       b1    b2    b3
## b1 1.000 0.562 0.376
## b2 0.562 1.000 0.554
## b3 0.376 0.554 1.000
## 
## SET 2:
##       a1    a2    a3
## a1 1.000 0.207 0.257
## a2 0.207 1.000 0.419
## a3 0.257 0.419 1.000
## 
## 
## AVERAGE CORRELATIONS:
## Set1 mean r= 0.497 
## Set2 mean r= 0.295 
## Difference in mean r (set1 - set2)= 0.203 
## 
## BOOTSTRAP SUMMARY:
## 
## ORDINARY NONPARAMETRIC BOOTSTRAP
## 
## 
## Call:
## boot(data = data[, c(set1, set2)], statistic = mean_diff_correlation, 
##     R = iterations, set1 = set1, set2 = set2)
## 
## 
## Bootstrap Statistics :
##     original    bias    std. error
## t1*   0.2028 -0.002116     0.07837
## 
## 
## Bootstrap Confidence Interval: 0.95
</code></pre>

<pre><code>## Warning: bootstrap variances needed for studentized intervals
</code></pre>

<pre><code>## BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS
## Based on 1000 bootstrap replicates
## 
## CALL : 
## boot.ci(boot.out = x$boot_results, conf = x$ci)
## 
## Intervals : 
## Level      Normal              Basic         
## 95%   ( 0.0513,  0.3585 )   ( 0.0465,  0.3700 )  
## 
## Level     Percentile            BCa          
## 95%   ( 0.0356,  0.3591 )   ( 0.0351,  0.3536 )  
## Calculations and Intervals on Original Scale
</code></pre>

<p>The <code>print</code> method outputs a range of descriptive statistics and results of the bootstrap analysis. For instance, the sample size, set 1 correlation matrix, set correlation matrix and average correlations are displayed. In addition the sample average difference in the correlation is also displayed. </p>

<p>The bootstrap analysis can be used to develop confidence intervals. In this case 95% percent confidence intervals are reported.
Various bootstrap confidence intervals are reported by the <code>boot.ci</code> function in the <code>boot</code> package. See <code>?boot.ci</code> for more information. In this case, the differences are fairly minor. If you are looking to choose one, the <code>BCa</code> method may be a good choice.</p>

<p>In the present case we might write up the results as follows:</p>

<blockquote>
<p>The average sample correlation for variables a1, a2 and a3 was r=.29, and for b1, b2, and ,b3 was r=.49, corresponding to a .20 sample difference. Using BCa bootstrap confidence intervals using 1,000 bootsrapped iterations, the 95% confidence interval for the difference in average correlations was (0.04 to 0.36). Given this does not include zero we may infer that set 2 has a significantly larger average correlation.</p>
</blockquote>

</body>

</html>
